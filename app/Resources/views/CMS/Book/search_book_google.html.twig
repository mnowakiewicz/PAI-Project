{% extends 'CMS/Common/base.html.twig' %}

{% block content_wrapper %}
    <div class="col-md-3">
        <div class="box">
            <div class="box-header with-border">
                <h3 class="box-title">{% trans %}books.google.add.book{% endtrans %}</h3>

                {#<div class="box-tools pull-right">#}
                {#<button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"#}
                {#title="Collapse">#}
                {#<i class="fa fa-minus"></i></button>#}
                {#<button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove">#}
                {#<i class="fa fa-times"></i></button>#}
                {#</div>#}
            </div>
            <div class="box-body">
                {{ form_start(form) }}
                {{ form_widget(form) }}
                <button type="submit" id="submit-form" class="btn btn-primary">Search</button>
                {{ form_end(form) }}
            </div>
            <!-- /.box-body -->
        </div>
        <!-- /.box -->
    </div>
    <div class="col-md-9">
        <div class="box">
            <div class="box-body">
                <table id="data-table" class="table table-bordered table-striped">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>SubTitle</th>
                        <th>Published</th>
                        <th>Active</th>
                        <th>Creation Date</th>
                        <th>Edit Date</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
        <script>
            $(function () {

                $('#submit-form').click(function (e) {
                    e.preventDefault();
                    var form = $("[name='googlebundle_parameters']")[0];
                    console.log(form);

                    var formData = new FormData(form);

                    $.ajax({
                        url: '{{ path('api_googlebooks_get') }}',
                        data: formData,
                        type: 'POST',
                        processData: false,
                        contentType: false,
                        dataType: "json",
                        success: function (data) {
                            console.log(JSON.parse(data));
                        }
                    })
                })


                $('#data-table').DataTable({
                    serverSide: true,
                    searching: false,
                    ajax: '{{ path('api_books_datatable_data') }}'
                });
            })
        </script>
    </div>
{% endblock %}